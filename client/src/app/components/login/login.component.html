<div class='content-box'>
  <h2 class='form__header'>Login</h2>
  <!-- Reactive form -->
  <form 
    name='form'
    *ngIf='!isLoggedIn'
    [formGroup]='userForm'
    novalidate
  >
    <div>
      <!-- Email -->
      <mat-form-field appearance='outline'>
        <mat-label for='email'>Email</mat-label>
        <input 
          name='email'
          type='email' 
          formControlName='email'
          matInput placeholder='example@email.com'
          [class.is-invalid]="userForm.get('email').invalid && userForm.get('email').touched"
        />
        <div
          role='alert'
          *ngIf='email.touched && email.invalid'
        >
          Email required!
        </div>
      </mat-form-field>
    </div>
    <div>
      <!-- Password -->
      <mat-form-field appearance='outline'>
        <mat-label for='password'>Password</mat-label>
        <input 
          name='password'
          type='password'
          formControlName='password'
          matInput placeholder='***'
          [class.is-invalid]="userForm.get('password').invalid && userForm.get('password').touched"
        />
        <div
          role='alert'
          *ngIf='password.touched && password.invalid'
        >
          Password required!
        </div>
      </mat-form-field>
    </div>
    <div>
      <!-- Login button -->
      <button 
        mat-flat-button
        (click)='onSubmit()'
        [disabled]='userForm.invalid'
      >
        Login
      </button>
    </div>
    <!-- Error message -->
    <div
      role='alert'
      *ngIf='userForm.submitted && isLoginFailed'
    >
      Login failed: {{ errorMessage }}
    </div>
  </form>
</div>
